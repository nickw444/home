lock:
  - platform: template
    name: Complex Door
    value_template: "{{ is_state('switch.door_key', 'off') }}"
    availability_template: "{{ not is_state('switch.door_key', 'unavailable') }}"
    lock:
      service: switch.turn_off
      data:
        entity_id: switch.door_key
    unlock:
      service: switch.turn_on
      data:
        entity_id: switch.door_key
