timer:
  sous_vide:

input_select:
  sous_vide_preset:
    options:
      - Steak (Medium Rare)
      - Slow Poached Eggs
      - Salmon

script:
  sous_vide_preheat:
    sequence:
      - service: climate.set_temperature
        data_template:
          entity_id: climate.sous_vide
          hvac_mode: 'heat_cool'
          temperature: >
           {% set preset_temperatures={
             'Steak (Medium Rare)': '54.2',
             'Slow Poached Eggs': '62.8',
            } %}
           {{ preset_temperatures[states('input_select.sous_vide_preset')] }}
      - wait_template: "{{ state_attr('climate.sous_vide', 'current_temperature') >= state_attr('climate.sous_vide', 'temperature')}}"
      # notify that it is ready for food. Wait until temperature falls below preset
      # continue to cook sequence...

  sous_vide_cook:
    sequence:
      # - wait_template: "{{ state_attr('climate.sous_vide', 'current_temperature') >= state_attr('climate.sous_vide', 'temperature')}}"
      # Notify that the cook process has started
      - service: timer.start
        data_template:
          entity_id: timer.sous_vide
          duration: >
            {% set preset_times={
              'Steak (Medium Rare)': '02:00:00',
              'Slow Poached Eggs': '00:45:00',
            } %}
            {{ preset_times[states('input_select.sous_vide_preset')] }}
